---
layout: post
title:  "Maven知识点备忘"
date:   2017-03-28 16:16:40 +0800
categories:
  - Java
tag:
  - maven
  - java

---


#### `optional`
适用于:
1. 解决循环依赖
2. 包A对另外一个包B是可选的, C依赖B时候并不一定需要A, 可以在B的依赖中配置A的`optional`为`true`

``` xml
<dependency>
  <groupId>sample.ProjectA</groupId>
  <artifactId>Project-A</artifactId>
  <version>1.0</version>
  <scope>compile</scope>
  <optional>true</optional> <!-- value will be true or false only -->
</dependency>
```
这是我比较喜欢的一种方式, 特别是一个包中仅很少情况下用户到的依赖, 通过`optional`控制范围, 就不会将自己依赖的一堆不重要的包, 再传递给依赖自己的项目中, 缩小引用的范围, 减少打出的可执行包的大小

对于`optional`, maven官网上有一句话:
>It may be helpful to think of optional dependencies as "excluded by default."

和scope区分起来, 问题主要在于scope没有提供一种关系, 能够表示我可能用到这个包, 但是概率不大的情况. 比较类似的是`provide`, 但是一个是依赖的范围, 一个是传递的范围


#### Lifecycle

There are three built-in build lifecycles: `default`, `clean` and `site`.

##### Clean Lifecycle

* `pre-clean`	execute processes needed prior to the actual project cleaning
* `clean`	remove all files generated by the previous build
* `post-clean`	execute processes needed to finalize the project cleaning

##### Default Lifecycle
* `validate` validate the project is correct and all necessary information is available.
* `initialize` initialize build state, e.g. set properties or create directories.
* `generate-sources` generate any source code for inclusion in compilation.
* `process-sources` process the source code, for example to filter any values.
* `generate-resources` generate resources for inclusion in the package.
* `process-resources` copy and process the resources into the destination directory, ready for packaging.
* `compile` compile the source code of the project.
* `process-classes` post-process the generated files from compilation, for example to do bytecode enhancement on Java classes.
* `generate-test-sources` generate any test source code for inclusion in compilation.
* `process-test-sources` process the test source code, for example to filter any values.
* `generate-test-resources` create resources for testing.
* `process-test-resources` copy and process the resources into the test destination directory.
* `test-compile` compile the test source code into the test destination directory
* `process-test-classes` post-process the generated files from test compilation, for example to do bytecode enhancement on Java classes. For Maven 2.0.5 and above.
* `test` run tests using a suitable unit testing framework. These tests should not require the code be packaged or deployed.
* `prepare-package` perform any operations necessary to prepare a package before the actual packaging. This often results in an unpacked, processed version of the package. (Maven 2.1 and above)
* `package` take the compiled code and package it in its distributable format, such as a JAR.
* `pre-integration-test` perform actions required before integration tests are executed. This may involve things such as setting up the required environment.
* `integration-test` process and deploy the package if necessary into an environment where integration tests can be run.
* `post-integration-test` perform actions required after integration tests have been executed. This may including cleaning up the environment.
* `verify` run any checks to verify the package is valid and meets quality criteria.
* `install` install the package into the local repository, for use as a dependency in other projects locally.
* `deploy` done in an integration or release environment, copies the final package to the remote repository for sharing with other developers and projects.

#### Site Lifecycle

* `pre-site` execute processes needed prior to the actual project site generation
* `site` generate the project's site documentation
* `post-site` execute processes needed to finalize the site generation, and to prepare for site deployment
* `site-deploy` deploy the generated site documentation to the specified web server
